import mockAxios from 'jest-mock-axios';
import AppService from './AppService';

describe("Pokemon API", () => {
  beforeEach(() => {
    mockAxios.reset();
  });

  it("call the api with the provided name and returns the data", async () => {

    // Given
    let pokemonName = 'charizard';
    let expected = { name: "charizard", description: "Spits fire yond is hot enow to melt boulders. Known to cause forest fires unintentionally, spits fire yond is hot enow to melt boulders. Known to cause forest fires unintentionally, at which hour expelling a fie of super hot fire,  the red flame at the tip of its tail burns moo intensely, if 't be true charizard beest­ cometh furious,  the flame at the tip of its tail flares up in a whitish- blue color, breathing intense,  hot flames,  't can melt almost any­ thing. Its breath inflicts lacking valor teen on enemies, 't uses its wings to fly high. The temperature of its fire increases as 't gains exper­ ience in hurlyburly, charizard flies 'round the sky in search of powerful opponents. 't breathes fire of such most wondrous heat yond 't melts aught. However,  't nev'r turns its fiery breath on any opponent weaker than itself, charizard flies 'round the sky in search of powerful opponents. 't breathes fire of such most wondrous heat yond 't melts aught. However,  't nev'r turns its fiery breath on any opponent weaker than itself, a charizard flies about in search of stout opponents. 't breathes intense flames yond can melt any material. However,  'twill nev'r torch a weaker foe, its wings can carryeth this pokémon close to an altitude of 4,600 feet. 't blows out fire at very high temperatures, 't spits fire yond is hot enow to melt boulders. 't may cause forest fires by blowing flames, 't is did doth sayeth yond charizard’s fire burns hotter if 't be true 't hath experienced harsh battles, 't is did doth sayeth yond charizard’s fire burns hotter if 't be true 't hath experienced harsh battles, 't is did doth sayeth yond charizard’s fire burns hotter if 't be true 't hath experienced harsh battles, if 't be true charizard becomes furious,  the flame at the tip of its tail flares up in a light blue shade, breathing intense,  hot flames,  't can melt almost aught. Its breath inflicts lacking valor teen on enemies, 't is did doth sayeth yond charizard’s fire burns hotter if 't be true 't hath experienced harsh battles, 't is did doth sayeth yond charizard’s fire burns hotter if 't be true 't hath experienced harsh battles, 't is did doth sayeth yond charizard’s fire burns hotter if 't be true 't hath experienced harsh battles, 't is did doth sayeth yond charizard’s fire burns hotter if 't be true 't hath experienced harsh battles, at which hour expelling a fie of superhot fire,  the red flame at the tip of its tail burns moo intensely, its wings can carryeth this pokémon close to an altitude of 4,600 feet. 't blows out fire at very high temperatures, charizard flies 'round the sky in search of powerful opponents. 't breathes fire of such most wondrous heat yond 't melts aught. However,  't nev'r turns its fiery breath on any opponent weaker than itself, charizard flies 'round the sky in search of powerful opponents. 't breathes fire of such most wondrous heat yond 't melts aught. However,  't nev'r turns its fiery breath on any opponent weaker than itself, its bond with its trainer is the source of its power. 't boasts speed and maneuverability ranker than yond of a jet fighter, the overwhelming power yond fills its entire corse causes 't to turn black and creates intense blue flames, at which hour this pokémon expels a fie of superhot fire,  the red flame at the tip of its tail burns moo intensely, its bond with its trainer is the source of its power. 't boasts speed and maneuverability ranker than yond of a jet fighter, the overwhelming power yond fills its entire corse causes 't to turn black and creates intense blue flames, at which hour this pokémon expels a fie of superhot fire,  the red flame at the tip of its tail burns moo intensely, 't spits fire yond is hot enow to melt boulders. 't may cause forest fires by blowing flames, this colossal,  flame-winged figure of a charizard wast did doth compass by gigantamax energy, its wings can carryeth this pokémon close to an altitude of 4,600 feet. 't blows out fire at very high temperatures, the flame inside its corse burns hotter than 3,600 degrees fahrenheit. At which hour charizard roars,  yond temperature climbs coequal higher." };
    mockAxios.get.mockResolvedValueOnce(expected);

    // When
    const result = await AppService.getSearchResults(pokemonName);

    // Then
    expect(result).toStrictEqual(expected);
  });
});